 <div class="tile">
<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="btn-toolbar pull-right" role="toolbar">
            <div class="btn-group">
                <button type="button" class="btn btn-default" ng-click="$root.$dialog($id).params({objectType:'users'}).url(dialog_import_excel_url).done();">${get_app_res("Import")}</button>
            </div>
            <div class="btn-group">
                    <button type="button" class="btn btn-default" ng-click="$root.$dialog($id).url(dialog_export_excel_url).done(get_url_export);">${get_app_res("Export")}</button>
            </div>
            <div class="btn-group">

            </div>
        </div>
	</div>
</div>
     <div class="row">
     	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
     		&nbsp;
     	</div>
     </div>
     <div class="row">
     	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
     		 <h3 class="pull-left">${get_app_res("Danh sách thành viên")}</h3>
            <div class="pull-right">
                 <div class="input-group">
  <input type="text" class="form-control" placeholder="${get_app_res('Tìm theo email hoặc username')}" style="min-width:300px" aria-describedby="basic-addon2">
  <span class="input-group-append">
        <button class="btn btn-outline-secondary" type="button">
            <i class="fa fa-search"></i>
        </button>
      </span>
</div>
            </div>

     	</div>
     </div>
     <div class="row">
     	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
     		&nbsp;
     	</div>
     </div>
<div class="row">
    <div class="col-md-12">




            <div class="table-responsive">
                <table class="table table-bordered">
                <thead>
                <tr>
                    <th>${get_app_res("Username")}</th>
                    <th>${get_app_res("Email")}</th>

                    <th>${get_app_res("Họ")}</th>
                     <th>${get_app_res("Tên")}</th>
                    <th>${get_app_res("Đã kích hoạt")}</th>
                    <th>${get_app_res("Là quản lý hệ thống")}</th>
                    <th>
                        <button class="btn btn-primary" ng-click="$root.$dialog($id).url('pages/users.new').done()">
                            ${get_global_res("Thêm")}
                        </button>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="p in data.items">
                    <td>
                        {{p.username}}
                    </td>
                    <td>
                        {{p.email}}
                    </td>
                     <td>
                        {{p.first_name}}
                    </td>
                     <td>
                        {{p.last_name}}
                    </td>
                    <td>

                        <span style="font-size:14pt" ng-if="p.is_active==1">
                            &#10003;
                        </span>
                        <span style="font-size:14pt" ng-if="p.is_active==0">
                            &#9633;
                        </span>
                    </td>
                    <td>

                        <span style="font-size:14pt" ng-if="p.is_superuser==1">
                            &#10003;
                        </span>
                        <span style="font-size:14pt" ng-if="p.is_superuser==0">
                            &#9633;
                        </span>

                    </td>
                    <td>
                        <button class="btn btn-primary " ng-click="$root.$dialog($id).params(p).url('pages/users.new').done()">
                            ${get_global_res("Sửa")}
                        </button>
                    </td>
                </tr>

                </tbody>
                  <thead>
                    <tr>
                    <th colspan="6"></th>
                    <th>
                        <button class="btn btn-primary " ng-click="$root.$dialog($id).url('pages/users.new').done()">
                            ${get_global_res("New")}
                        </button>
                    </th>
                </tr>
                  </thead>
            </table>
                </div>






    </div>
</div>
</div>

<script>
    (function(scope){
        debugger;
        scope.dialog_import_excel_url="${get_app_url('pages/dialogs/excel_import')}";
        scope.dialog_export_excel_url="${get_app_url('pages/dialogs/excel_export')}";
        scope.view_path="${get_view_path()}";
        services=ws(scope);
        scope.$root.onSearch(function(txt){
            scope.load_data(txt);
        })
        scope.load_data=function(txt){
            services.api("lv_admin.api.users/get_list")
                    .data({
                            search_text:txt,
                            page_size:50,
                            page_index:0,
                            sort:[]

                    }).done().then(function(res){
                        scope.data=res;
                        console.log(res);
                        scope.$applyAsync();
                    })

            /*ws_call("admin.api.users/get_list",{
                view:scope.view_path,
                data:{
                    search_text:txt
                }
            }).then(function(res){

            }).catch(function(ex){
                console.log(ex);
            })*/

        }
        scope.doDelete=function(item){
         console.log(item);
        }
        scope.load_data("");
        scope.get_url_export=function(subScope){
            subScope.getTitle=function(){
                return '${get_app_res("Xuất danh sách tài khoản ra Excel")}';
            };
            subScope.$applyAsync();
            subScope.url='${get_app_url("excel/download/users")}';
            console.log(subScope);
        };

    });
</script>

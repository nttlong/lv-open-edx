
<%page expression_filter="h" args="online_help_token"/>

<%namespace name='static' file='../static_content.html'/>
<%namespace file='../main.html' import="login_query"/>
<%!
from django.core.urlresolvers import reverse
from django.utils.translation import ugettext as _

from lms.djangoapps.ccx.overrides import get_current_ccx
from openedx.core.djangolib.markup import HTML, Text
# App that handles subdomain specific branding
from branding import api as branding_api
# app that handles site status messages
from status.status import get_site_status_msg
from openedx.core.djangoapps.lang_pref.api import header_language_selector_is_enabled, released_languages
%>
 <% languages = released_languages() %>
<ul class="nav navbar-nav navbar-right">
            <li class="primary">
              <form action="/i18n/setlang/" method="post" class="settings-language-form" id="language-settings-form">
                <input type="hidden" id="csrf_token" name="csrfmiddlewaretoken" value="${csrf_token}">
                % if user.is_authenticated():
                  <input title="preference api" type="hidden" class="url-endpoint" value="${reverse('preferences_api', kwargs={'username': user.username})}" data-user-is-authenticated="true">
                % else:
                  <input title="session update url" type="hidden" class="url-endpoint" value="${reverse('session_language')}" data-user-is-authenticated="false">
                % endif
                <label><span class="sr">${_("Choose Language")}</span>

                    <select class="selectpicker input select language-selector" data-width="fit" id="settings-language-value" name="language">
                        % for language in languages:
                        <%
                            if language[0] == "en":
                                code = "au"
                            else:
                                code = "vn"
                        %>
                          % if language[0] == LANGUAGE_CODE:
                            <option value="${language[0]}" selected="selected" data-content="<span class='flag-icon flag-icon-${code}'></span> ${language[1]}">${language[1]}</option>
                          % else:
                            <option value="${language[0]}" data-content="<span class='flag-icon flag-icon-${code}'></span> ${language[1]}">${language[1]}</option>
                          % endif
                        % endfor

                    </select>
                    <script>
                        $('.selectpicker').selectpicker();
                    </script>
                </label>
              </form>
            </li>
</ul>